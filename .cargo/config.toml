[build]
rustflags = []

# see https://pyo3.rs/main/building_and_distribution.html#macos
[target.x86_64-apple-darwin]
rustflags = [
  "-C", "link-arg=-undefined",
  "-C", "link-arg=dynamic_lookup",
]

[target.aarch64-apple-darwin]
rustflags = [
  "-C", "link-arg=-undefined",
  "-C", "link-arg=dynamic_lookup",
]

[patch.crates-io]
speedate = { git = "https://github.com/DataDog/speedate.git", branch = "support-old-nightly" }
pyo3 = { git = "https://github.com/DataDog/pyo3.git", branch = "support-old-nightly" }
indexmap = { git = "https://github.com/DataDog/indexmap.git", branch = "support-old-nightly" }
